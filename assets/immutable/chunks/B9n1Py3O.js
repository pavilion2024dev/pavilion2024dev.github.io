import"./D5T7nYzr.js";import{D as k,aR as M}from"./BY2d0Maq.js";import{s as U,b}from"./Ci-qeE_y.js";import{r as N,i as K,l as j,o as X}from"./tOY9biQ7.js";const H={i18n:{default:"en"}},Q=()=>{const e=U;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},Y={subscribe(e){return Q().page.subscribe(e)}};function q(e,t){if(e==="")return"";const n=new URL(e,t).pathname;return n.endsWith("/")?n.slice(0,-1):n}function L(e,t){const n=Z(e),a=G(n,t),[i,s]=J(a);return[i,s]}const O=(e,t,n)=>[t,e,n??""].filter(a=>a!=="/").join("")||"/";function G(e,t){const n=e.replace(t,"");return n.startsWith("/")?n:`/${n}`}function J(e){const n=["/.html__data.json","/__data.json"].find(a=>e.endsWith(a));return n?[e.slice(0,-n.length)||"/",n]:[e,void 0]}function Z(e){try{return decodeURI(e)}catch{return e}}const V=e=>({url:t})=>{try{const[n,a]=L(t.pathname,b),i=e.getLanguageFromLocalisedPath(n);if(!i)return t.pathname;const s=e.getCanonicalPath(n,i);return O(s,b,a)}catch{return t.pathname}};function ee(e){return`/${e.split("/").filter(Boolean).join("/")}`}function te(e){const t=e.map(n=>typeof n=="string"?a=>a===n:a=>n.test(a));return n=>t.some(a=>a(ee(n)))}const w="rtl",R="ltr";function ne(e){try{const t=new Intl.Locale(e);return"textInfo"in t?t.textInfo.direction===w?w:R:t.getTextInfo().direction===w?w:R}catch{return R}}function re(e){const t=e.map(n=>[n,ne(n)]);return Object.fromEntries(t)}const ae=0,D=1,T=2,se=4,p=0,v=1,E=2;function ce(e){const t=ie(oe);return e.sort((n,a)=>{var i,s,c,o,r,u;const l=W(n).map(t),f=W(a).map(t);for(let h=0;h<Math.max(l.length,f.length);h+=1){const m=l[h],_=f[h];if(!m)return-1;if(!_)return 1;for(let x=0;x<Math.max(m.length,_.length);x+=1){const g=m[x],d=_[x];if((g==null?void 0:g[p])||(d==null?void 0:d[p])){if(!g)return-1;if(!d)return 1;const $=((i=m[x+1])==null?void 0:i[v])||((c=(s=l[h+1])==null?void 0:s[0])==null?void 0:c[v]),S=((o=_[x+1])==null?void 0:o[v])||((u=(r=f[h+1])==null?void 0:r[0])==null?void 0:u[v]),A=$&&S,P=$&&!S,B=!$&&S;if((g[p]&&d[p])===T){if(A)continue;if(P)return-1;if(B)return 1}if(g[p]===T)return P?-1:1;if(d[p]===T)return B?1:-1;if(g[E]!==d[E])return(-1)**+g[E];if(g[p]!==d[p])return(-1)**+(g[p]>d[p])}else if((g==null?void 0:g[v])!==(d==null?void 0:d[v]))return ue(g[v],d[v])}}return n<a?1:-1})}function ie(e){const t=new Map;return n=>(t.has(n)||t.set(n,e(n)),t.get(n))}function oe(e){const t=[];let n=0;for(;n<=e.length;){const a=e.indexOf("[",n),i=a===-1;if(t.push([ae,e.slice(n,i?void 0:a),!1]),i)break;const s=e[a+1]==="["?D:e[a+1]==="."?T:se,c=s===D?"]]":"]",o=e.indexOf(c,a);if(o===-1)throw new Error(`Invalid route definition ${e}`);const r=e.slice(a,n=o+c.length);t.push([s,r,r.includes("=")])}return t}const W=e=>e.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function ue(e,t){if(e===t)return 0;let n=0;for(;e[n]===t[n];)n++;return e[n]?t[n]?e[n]<t[n]?-1:1:-1:1}const le=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function fe(e){const t=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${z(e).map(a=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(a);if(i)return t.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const s=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(a);if(s)return t.push({name:s[1],matcher:s[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!a)return;const c=a.split(/\[(.+?)\](?!\])/);return"/"+c.map((r,u)=>{if(u%2){if(r.startsWith("x+"))return I(String.fromCharCode(parseInt(r.slice(2),16)));if(r.startsWith("u+"))return I(String.fromCharCode(...r.slice(2).split("-").map(x=>parseInt(x,16))));const l=le.exec(r);if(!l)throw new Error(`Invalid param: ${r}`);const[,f,h,m,_]=l;return t.push({name:m,matcher:_,optional:!!f,rest:!!h,chained:h?u===1&&c[0]==="":!1}),h?"(.*?)":f?"([^/]*)?":"([^/]+?)"}return I(r)}).join("")}).join("")}/?$`),params:t}}function he(e,t,n){const a={},i=e.slice(1),s=i.filter(o=>o!==void 0);let c=0;for(const[o,r]of t.entries()){let u=i[o-c];if(r.chained&&r.rest&&c&&(u=i.slice(o-c,o+1).filter(f=>f).join("/"),c=0),u===void 0){r.rest&&(a[r.name]="");continue}if(r.matcher&&!n[r.matcher])return;if((n[r.matcher]??(()=>!0))(u)){a[r.name]=u;const f=t[o+1],h=i[o+1];f&&!f.rest&&f.optional&&h&&r.chained&&(c=0),!f&&!h&&Object.keys(a).length===s.length&&(c=0);continue}if(r.optional&&r.chained){c++;continue}return}if(!c)return a}function I(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const ge=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function F(e,t){return"/"+z(e).map(n=>n.replace(ge,(a,i,s,c)=>{const o=t[c];if(!o){if(i||s&&o!==void 0)return"";throw new Error(`Missing parameter '${c}' in route ${e}`)}if(o[0]=="/"||o.endsWith("/"))throw new Error(`Parameter '${c}' in route ${e} cannot start or end with a slash`);return o})).filter(Boolean).join("/")}function C(e,t,n){const a=ce(t);for(const i of a){const s=fe(i),c=s.pattern.exec(de(e));if(!c)continue;const o=he(c,s.params,n);if(o)return{params:o,id:i}}}const de=e=>e.endsWith("/")?e.slice(0,-1):e,z=e=>e.slice(1).split("/"),me=(e,t)=>Object.fromEntries(Object.entries(e).map(([n,a])=>[n,typeof a=="object"?a:pe(a,t)])),pe=(e,t)=>Object.fromEntries(t.map(n=>[n,e({},{languageTag:n})]));function _e(e,t,n,a,i){function s(r){const l=r.split("/")[1];if(e.includes(l)&&(i==="always"||l!==t))return l;if(i==="never")return t}function c(r,u){const l=r.endsWith("/")&&r!=="/";r=l?r.slice(0,-1):r;let f=ve(r,u,n,a);return l&&(f+="/"),(i==="always"||u!==t)&&(f=`/${u}${f}`),f}function o(r,u){const l=r.endsWith("/")&&r!=="/";(i==="always"||u!==t)&&(r=r.replace(`/${u}`,"")||"/");const f=l;r=f?r.slice(0,-1):r;let h=xe(r,u,n,a);return f&&(h+="/"),h}return{getLanguageFromLocalisedPath:s,getLocalisedPath:c,getCanonicalPath:o}}function xe(e,t,n,a){for(const[i,s]of Object.entries(n)){if(!(t in s))continue;const c=s[t];if(!c)continue;const o=C(e,[c],a);if(o)return F(i,o.params)}return e}function ve(e,t,n,a){const i=C(e,Object.keys(n),a);if(!i)return e;const s=n[i.id];if(!s)return e;const c=s[t];return c?F(c,i.params):e}function be(e,t){var o;const n=t!=null&&t.pathnames?me(t.pathnames,e.availableLanguageTags):{},a=(t==null?void 0:t.exclude)??[],i=(t==null?void 0:t.defaultLanguageTag)??e.sourceLanguageTag,s={defaultLanguageTag:i,runtime:e,translations:n,matchers:(t==null?void 0:t.matchers)??{},exclude:te(a),prefixDefaultLanguage:(t==null?void 0:t.prefixDefaultLanguage)??"never",textDirection:(t==null?void 0:t.textDirection)??re(e.availableLanguageTags),seo:{noAlternateLinks:((o=t==null?void 0:t.seo)==null?void 0:o.noAlternateLinks)??!1}},c=_e(e.availableLanguageTags,i,s.translations,s.matchers,s.prefixDefaultLanguage);return Object.freeze(n),Object.freeze(s),{config:s,strategy:c,reroute:()=>V(c),handle:()=>{throw new Error("")},getLanguageFromUrl(r){const u=y(b),[l]=L(r.pathname,u);return s.exclude(l)?s.defaultLanguageTag:c.getLanguageFromLocalisedPath(l)||s.defaultLanguageTag},resolveRoute(r,u=void 0){if(s.exclude(r))return r;const l=y(b),[f,h]=L(r,l);if(u=u??e.languageTag(),!r.startsWith(l))return r;const m=c.getLocalisedPath(f,u);return O(m,l,h)},route(r){const u=y(b),[l,f]=L(r,u),m=c.getLanguageFromLocalisedPath(l)||s.defaultLanguageTag,_=c.getCanonicalPath(l,m);return O(_,u,f)}}}function y(e){return e===""?"":e.startsWith("/")?e:q(e,new URL(k(Y).url))}new TextEncoder;const we=e=>K(e)?e:"en",Re=be(N,{defaultLanguageTag:we(H.i18n.default)}),Ee=M(j(),e=>{e(j()),X(()=>{e(j())})});export{L as a,H as c,Re as i,Ee as l,q as n,Y as p,O as s};
